{"files":{"index.html":{"content":"<!doctype html>\n<!--\n @license\n Copyright 2022 Google LLC. All Rights Reserved.\n SPDX-License-Identifier: Apache-2.0\n-->\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <meta name=\"description\" content=\"Display a GPT-managed rewarded ad.\" />\n    <title>Display a rewarded ad</title>\n    <script async src=\"https://securepubads.g.doubleclick.net/tag/js/gpt.js\"></script>\n    <script type=\"module\" src=\"./sample.js\"></script>\n    <style>\n      .modal {\n        display: none;\n        position: fixed;\n        z-index: 1;\n        padding-top: 300px;\n        left: 0;\n        top: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.4);\n      }\n\n      .modal[data-type] {\n        display: block;\n      }\n\n      .modalDialog {\n        margin: auto;\n        padding: 25px;\n        background-color: white;\n        text-align: center;\n        position: fixed;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n      }\n\n      .grantButtons,\n      .rewardButtons {\n        display: none;\n      }\n\n      .modal[data-type=\"grant\"] .grantButtons,\n      .modal[data-type=\"reward\"] .rewardButtons {\n        display: block;\n      }\n\n      .modal input[type=\"button\"] {\n        padding: 0.5rem;\n        background: blue;\n        border: none;\n        border-radius: 4px;\n        margin: 4px;\n        color: white;\n      }\n    </style>\n  </head>\n  <body>\n    <div id=\"modal\" class=\"modal\">\n      <div class=\"modalDialog\">\n        <p id=\"modalMessage\"></p>\n\n        <span class=\"grantButtons\">\n          <input id=\"closeButton\" type=\"button\" value=\"Close\" />\n        </span>\n\n        <span class=\"rewardButtons\">\n          <input type=\"button\" id=\"watchAdButton\" value=\"Yes\" />\n          <input id=\"noRewardButton\" type=\"button\" value=\"No\" />\n        </span>\n      </div>\n    </div>\n  </body>\n</html>\n"},"sample.ts":{"content":"/**\n * @license\n * Copyright 2022 Google LLC. All Rights Reserved.\n * SPDX-License-Identifier: Apache-2.0\n */\n\n// Using @types/google-publisher-tag\n// https://www.npmjs.com/package/@types/google-publisher-tag\n\nwindow.googletag = window.googletag || { cmd: [] };\n\nlet rewardedSlot: googletag.Slot | null;\n\ngoogletag.cmd.push(() => {\n  rewardedSlot = googletag.defineOutOfPageSlot(\n    \"/22639388115/rewarded_web_example\",\n    googletag.enums.OutOfPageFormat.REWARDED,\n  );\n\n  // Slot returns null if the page or device does not support rewarded ads.\n  if (rewardedSlot) {\n    rewardedSlot.addService(googletag.pubads());\n\n    googletag.pubads().addEventListener(\"rewardedSlotReady\", (event) => {\n      document.getElementById(\"watchAdButton\")!.onclick = () => {\n        event.makeRewardedVisible();\n        displayModal();\n      };\n\n      displayModal(\"reward\", \"Watch an ad to receive a special reward?\");\n    });\n\n    googletag.pubads().addEventListener(\"rewardedSlotClosed\", dismissRewardedAd);\n\n    googletag.pubads().addEventListener(\"rewardedSlotGranted\", (event) => {\n      // Automatically close the ad by destroying the slot.\n      // Remove this to force the user to close the ad themselves.\n      dismissRewardedAd();\n\n      const reward = event.payload;\n      if (reward) {\n        displayModal(\"grant\", `You have been rewarded ${reward.amount} ${reward.type}!`);\n      }\n    });\n\n    googletag.enableServices();\n    googletag.display(rewardedSlot);\n  }\n});\n\nfunction dismissRewardedAd() {\n  displayModal();\n\n  if (rewardedSlot) {\n    googletag.destroySlots([rewardedSlot]);\n  }\n}\n\nfunction displayModal(type: string = \"\", message: string = \"\") {\n  const modal = document.getElementById(\"modal\")!;\n  modal.removeAttribute(\"data-type\");\n\n  if (type) {\n    document.getElementById(\"modalMessage\")!.textContent = message;\n    modal.setAttribute(\"data-type\", type);\n  }\n}\n\n// Register click event handlers.\ndocument.getElementById(\"closeButton\")!.addEventListener(\"click\", dismissRewardedAd);\ndocument.getElementById(\"noRewardButton\")!.addEventListener(\"click\", dismissRewardedAd);\n"},"package.json":{"content":"{\"dependencies\": {\"@types/google-publisher-tag\": \"^1.0.0\"}}","hidden":true}}}