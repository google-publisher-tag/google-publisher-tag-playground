{"files":{"index.html":{"content":"<!doctype html>\n<!--\n @license\n Copyright 2022 Google LLC. All Rights Reserved.\n SPDX-License-Identifier: Apache-2.0\n-->\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <meta\n      name=\"description\"\n      content=\"Precisely control which ad slots are requested when in Single Request Architecture (SRA) mode.\"\n    />\n    <title>Control SRA batching</title>\n    <script async src=\"https://securepubads.g.doubleclick.net/tag/js/gpt.js\"></script>\n    <script>\n      window.googletag = window.googletag || { cmd: [] };\n\n      // Number of seconds to wait before making the second SRA request.\n      let waitSeconds = 5;\n\n      googletag.cmd.push(() => {\n        // Define ad slots.\n        const slots = [\n          googletag\n            .defineSlot(\"/6355419/Travel/Europe\", [728, 90], \"slot-1\")\n            .addService(googletag.pubads()),\n          googletag\n            .defineSlot(\"/6355419/Travel/Europe\", [728, 90], \"slot-2\")\n            .addService(googletag.pubads()),\n          googletag\n            .defineSlot(\"/6355419/Travel/Europe\", [300, 250], \"slot-3\")\n            .addService(googletag.pubads()),\n          googletag\n            .defineSlot(\"/6355419/Travel/Europe\", [300, 250], \"slot-4\")\n            .addService(googletag.pubads()),\n          googletag\n            .defineSlot(\"/6355419/Travel/Europe\", [300, 250], \"slot-5\")\n            .addService(googletag.pubads()),\n        ];\n\n        // Disable initial load to precisely control when ads are requested.\n        googletag.pubads().disableInitialLoad();\n\n        // Enable SRA and services.\n        googletag.pubads().enableSingleRequest();\n        googletag.enableServices();\n\n        // Issue first SRA request (slots 1 and 2) immediately.\n        googletag.pubads().refresh(slots.slice(0, 2));\n\n        // Issue second SRA request (slots 3, 4, and 5) after a delay.\n        const interval = setInterval(() => {\n          document.getElementById(\"seconds\").textContent = (--waitSeconds).toString();\n\n          if (waitSeconds === 0) {\n            googletag.pubads().refresh(slots.slice(2));\n            clearInterval(interval);\n          }\n        }, 1000);\n      });\n    </script>\n    <style>\n      .ad-slot {\n        border-style: solid;\n        display: block;\n        margin: 1px;\n      }\n\n      .row {\n        display: flex;\n        flex-wrap: wrap;\n        justify-content: center;\n      }\n    </style>\n  </head>\n  <body>\n    <div class=\"row\">\n      <p>SRA request #1</p>\n    </div>\n\n    <div class=\"row\">\n      <div id=\"slot-1\" class=\"ad-slot\" style=\"height: 90px; width: 728px\"></div>\n      <div id=\"slot-2\" class=\"ad-slot\" style=\"height: 90px; width: 728px\"></div>\n    </div>\n\n    <div class=\"row\">\n      <p>SRA request #2 in <span id=\"seconds\">5</span> seconds...</p>\n    </div>\n\n    <div class=\"row\">\n      <div id=\"slot-3\" class=\"ad-slot\" style=\"height: 250px; width: 300px\"></div>\n      <div id=\"slot-4\" class=\"ad-slot\" style=\"height: 250px; width: 300px\"></div>\n      <div id=\"slot-5\" class=\"ad-slot\" style=\"height: 250px; width: 300px\"></div>\n    </div>\n  </body>\n</html>\n"}}}