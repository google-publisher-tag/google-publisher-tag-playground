{"files":{"index.html":{"content":"<!doctype html>\n<!--\n @license\n Copyright 2022 Google LLC. All Rights Reserved.\n SPDX-License-Identifier: Apache-2.0\n-->\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <meta\n      name=\"description\"\n      content=\"Use key-value targeting to control the ads eligible to serve to specific ad slots.\"\n    />\n    <title>Key-value targeting</title>\n    <script async src=\"https://securepubads.g.doubleclick.net/tag/js/gpt.js\"></script>\n    <script>\n      window.googletag = window.googletag || { cmd: [] };\n\n      // GPT slots\n      let adSlots = [];\n\n      googletag.cmd.push(() => {\n        // Configure slot-level targeting.\n        adSlots[0] = googletag\n          .defineSlot(\"/6355419/Travel/Asia\", [728, 90], \"banner-ad-1\")\n          .addService(googletag.pubads())\n          .setTargeting(\"color\", \"red\")\n          .setTargeting(\"position\", \"atf\");\n        adSlots[1] = googletag\n          .defineSlot(\"/6355419/Travel/Asia\", [728, 90], \"banner-ad-2\")\n          .addService(googletag.pubads())\n          .setTargeting(\"position\", \"btf\");\n\n        // Configure page-level targeting.\n        googletag.pubads().setTargeting(\"interests\", \"basketball\");\n\n        // Enable SRA and services.\n        googletag.pubads().enableSingleRequest();\n        googletag.enableServices();\n      });\n\n      function toggleTargeting() {\n        const button = this;\n\n        const isTargetingSet = button.getAttribute(\"data-enabled\") === \"true\";\n        button.setAttribute(\"data-enabled\", (!isTargetingSet).toString());\n\n        googletag.cmd.push(() => {\n          // Enable or disable targeting depending on the state of the page.\n          if (isTargetingSet) {\n            disableTargeting();\n          } else {\n            enableTargeting();\n          }\n\n          // Refresh all ads for targeting changes to take effect.\n          googletag.pubads().refresh();\n        });\n      }\n\n      function enableTargeting() {\n        // Reset slot- and page-level targeting to their original values.\n        adSlots[0].setTargeting(\"color\", \"red\");\n        googletag.pubads().setTargeting(\"interests\", \"basketball\");\n      }\n\n      function disableTargeting() {\n        // Step 1, clear slot-level color targeting.\n        adSlots[0].clearTargeting(\"color\");\n\n        // Step 2, clear all page-level targeting.\n        googletag.pubads().clearTargeting();\n      }\n    </script>\n    <style>\n      .ads,\n      .buttons {\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        width: 100%;\n      }\n\n      button::before {\n        content: \"Disable \";\n        color: red;\n        font-weight: bold;\n      }\n\n      button[data-enabled=\"false\"]::before {\n        content: \"Enable \";\n        color: green;\n        font-weight: bold;\n      }\n    </style>\n  </head>\n  <body>\n    <div class=\"ads\">\n      <div id=\"banner-ad-1\" style=\"width: 728px; height: 90px\"></div>\n      <div id=\"banner-ad-2\" style=\"width: 728px; height: 90px\"></div>\n    </div>\n\n    <div class=\"buttons\">\n      <button id=\"targetingButton\" data-enabled=\"true\">targeting</button>\n    </div>\n    <script>\n      googletag.cmd.push(function () {\n        // Request and render all previously defined ad slots.\n        googletag.display(\"banner-ad-1\");\n\n        // Register click event handlers.\n        document.getElementById(\"targetingButton\").addEventListener(\"click\", toggleTargeting);\n      });\n    </script>\n  </body>\n</html>\n"}}}