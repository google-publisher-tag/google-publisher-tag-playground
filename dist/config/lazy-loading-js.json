{"files":{"index.html":{"content":"<!doctype html>\n<!--\n @license\n Copyright 2022 Google LLC. All Rights Reserved.\n SPDX-License-Identifier: Apache-2.0\n-->\n<html>\n  <head>\n    <meta charset=\"utf-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\" />\n    <meta name=\"description\" content=\"Defer the requesting and rendering of ads.\" />\n    <title>Lazy loading</title>\n    <script async src=\"https://securepubads.g.doubleclick.net/tag/js/gpt.js\"></script>\n    <script>\n      window.googletag = window.googletag || { cmd: [] };\n\n      googletag.cmd.push(() => {\n        googletag\n          .defineSlot(\"/6355419/Travel\", [728, 90], \"div-1\")\n          .setTargeting(\"test\", \"lazyload\")\n          .addService(googletag.pubads());\n        googletag\n          .defineSlot(\"/6355419/Travel\", [728, 90], \"div-2\")\n          .setTargeting(\"test\", \"lazyload\")\n          .addService(googletag.pubads());\n        googletag\n          .defineSlot(\"/6355419/Travel\", [728, 90], \"div-3\")\n          .setTargeting(\"test\", \"lazyload\")\n          .addService(googletag.pubads());\n\n        // Some examples of ways to enable lazy loading below.\n        // Normally, only one of these methods should be used.\n\n        // A) Enable with defaults.\n        googletag.pubads().enableLazyLoad();\n\n        // B) Enable without lazy fetching. Additional calls override previous\n        // ones.\n        googletag.pubads().enableLazyLoad({ fetchMarginPercent: -1 });\n\n        // C) Enable lazy loading with...\n        googletag.pubads().enableLazyLoad({\n          // Fetch slots within 5 viewports.\n          fetchMarginPercent: 500,\n          // Render slots within 2 viewports.\n          renderMarginPercent: 200,\n          // Double the above values on mobile, where viewports are smaller\n          // and users tend to scroll faster.\n          mobileScaling: 2.0,\n        });\n\n        // Register event handlers to observe lazy loading behavior.\n        googletag.pubads().addEventListener(\"slotRequested\", (event) => {\n          updateSlotStatus(event.slot.getSlotElementId(), \"fetched\");\n        });\n\n        googletag.pubads().addEventListener(\"slotOnload\", (event) => {\n          updateSlotStatus(event.slot.getSlotElementId(), \"rendered\");\n        });\n\n        // Enable SRA and services.\n        googletag.pubads().enableSingleRequest();\n        googletag.enableServices();\n      });\n\n      function updateSlotStatus(slotId, state) {\n        const elem = document.getElementById(slotId + \"-\" + state);\n        elem.className = \"activated\";\n        elem.innerText = \"Yes\";\n      }\n    </script>\n    <style>\n      div.ad-slot {\n        border-style: dashed;\n        display: block;\n        margin: auto;\n      }\n\n      div.main-content {\n        background-color: lightsteelblue;\n        margin-top: 125px;\n        overflow: hidden;\n        width: 100%;\n      }\n\n      div.status-panel {\n        background: white;\n        height: 125px;\n        position: fixed;\n        top: 0;\n        width: 100%;\n      }\n\n      table {\n        width: 100%;\n      }\n\n      table th {\n        text-align: center;\n      }\n\n      table td:not(.slot-name) {\n        background-color: lightsalmon;\n      }\n\n      table td.activated {\n        background-color: lightgreen;\n      }\n    </style>\n  </head>\n  <body>\n    <!--\n      As defined by lazy load settings, initially:\n      1. Slot 1 will be fetched and rendered on mobile and desktop.\n      2. Slot 2 will be fetched on mobile and desktop, but will not be rendered on desktop.\n      3. Slot 3 will be fetched on mobile and desktop, but rendered on neither.\n    -->\n\n    <div class=\"main-content\">\n      <div id=\"div-1\" class=\"ad-slot\" style=\"height: 90px; width: 728px\"></div>\n\n      <!-- 3 viewport tall div to place next slot 3 viewports away. -->\n      <div style=\"height: 300vh\"></div>\n\n      <div id=\"div-2\" class=\"ad-slot\" style=\"height: 90px; width: 728px\"></div>\n\n      <!-- 9 viewport tall div to place next slot 12 viewports away. -->\n      <div style=\"height: 900vh\"></div>\n\n      <div id=\"div-3\" class=\"ad-slot\" style=\"height: 90px; width: 728px\"></div>\n    </div>\n\n    <div class=\"status-panel\">\n      <table>\n        <tr>\n          <th>Ad Slot</th>\n          <th>Fetched?</th>\n          <th>Rendered?</th>\n        </tr>\n        <tr>\n          <td class=\"slot-name\">Ad Slot 1</td>\n          <td id=\"div-1-fetched\">No</td>\n          <td id=\"div-1-rendered\">No</td>\n        </tr>\n        <tr>\n          <td class=\"slot-name\">Ad Slot 2</td>\n          <td id=\"div-2-fetched\">No</td>\n          <td id=\"div-2-rendered\">No</td>\n        </tr>\n        <tr>\n          <td class=\"slot-name\">Ad Slot 3</td>\n          <td id=\"div-3-fetched\">No</td>\n          <td id=\"div-3-rendered\">No</td>\n        </tr>\n      </table>\n      <p>Scroll the container below to lazily load the ad slots.</p>\n    </div>\n    <script>\n      googletag.cmd.push(function () {\n        // Request all previously defined ad slots.\n        googletag.display(\"div-1\");\n      });\n    </script>\n  </body>\n</html>\n"}}}